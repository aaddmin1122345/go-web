<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>test</title>
    <link rel="stylesheet" type="text/css" href="./css/user.css">
    <script src="./script/jquery-3.7.1.js"></script>
    <script src="./script/user.js"></script>

    <script>
        $(document).ready(function () {
            // 点击发送Ajax响应
            $("#btn1").click(function () {
                sendAjaxHello();
            });

            // 点击计算
            // $("#registerBtn").click(function () {
            //     addUser();
            // });

            // $("#registerBtn").click(function () {
            //     addUser();
            // });

            // 点击登录
            // $("#btn3").click(function () {
            //     login();
            // });

            // 另外一个版本的登陆
            // $("#loginSubmit").click(function () {
            //     login();
            // });

            // $("#btn5").click(function () {
            //     searchUser();
            // });
            //
            // $("#btn6").click(function () {
            //     UserSelect();
            // });

            // 模糊查询
            $('#getUserByUserNameBtn').click(function () {
                getUserByUserName();
            });

            // 添加学生信息
            $('#addUserForm').submit(function (event) {
                event.preventDefault();
                addUser();
            });

            // 删除学生信息
            $('#delUserBtn').click(function () {
                delUser();
            });

            $('#updateUserBtn').click(function () {
                delUser();
            });

            // $('#loginForm').click(function () {
            //     login();
            // });
        });

        function sendAjaxHello() {
            $.ajax({
                type: "POST",
                url: "/sayHello",  // 修改为与后端路由匹配的路径
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (response) {
                    alert(response.message);
                },
                error: function (xhr, status, error) {
                    alert("请求失败：" + error);
                }
            });
        }

        // 计算
        function calculate() {
            const par1Value = parseInt($("#par1").val());
            const par2Value = parseInt($("#par2").val());
            const dataToSend = {
                par1: par1Value,
                par2: par2Value
            };

            $.ajax({
                type: "POST",
                url: "/sum",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                data: JSON.stringify(dataToSend),
                success: function (data) {
                    $("#result").html("<h1 style='color: red;'>结果：" + data.result + "</h1>");
                },
                error: function (xhr, status, error) {
                    alert("请求失败：" + error);
                }
            });
        }

        // 用户登录验证
        // function login() {
        //     const username = $("#user").val();
        //     const password = $("#pwd").val();
        //     const dataToSend = {
        //         username: username,
        //         password: password
        //     };
        //
        //     $.ajax({
        //         type: "POST",
        //         url: "/api/login",  // 修改为与后端路由匹配的路径
        //         contentType: "application/json; charset=utf-8",
        //         dataType: "json",
        //         data: JSON.stringify(dataToSend),
        //         success: function (data) {
        //             if (data.valid)
        //                 alert("登录成功");
        //             else
        //                 alert("登录失败");
        //         },
        //         error: function (err) {
        //             alert(err);
        //         }
        //     });
        // }



        // function getStud() {
        //     let data = {
        //         ID: 0,
        //         StudID: "",
        //         Username: "",
        //         Sex: "",
        //         Email: ""
        //     };
        //
        //     $.ajax({
        //         type: "GET",
        //         url: "/api/",
        //         dataType: "json",
        //         success: function (responseData) {
        //             data = responseData;
        //             console.log("success", data);
        //             $("#stud").html("ID: " + data.ID + "<br>" +
        //                 "学生 ID: " + data.StudID + "<br>" +
        //                 "用户名: " + data.Username + "<br>" +
        //                 "性别: " + data.Sex + "<br>" +
        //                 "邮箱: " + data.Email)
        //                 .css("color", "Red");
        //         },
        //         error: function () {
        //             console.log("false");
        //         }
        //     });
        // }
        //
        // function searchUser() {
        //     let searchUser = $("#searchUser").val();
        //     $.ajax({
        //         type: "POST",
        //         url: "/api/GetUsersByStudID",
        //         data: searchUser, // 直接发送搜索关键字字符串
        //         success: function (responseData) {
        //             const data = responseData;
        //             console.log("success", data);
        //             $("#stud").html("ID: " + data.ID + "<br>" +
        //                 "学生 ID: " + data.StudID + "<br>" +
        //                 "用户名: " + data.Username + "<br>" +
        //                 "性别: " + data.Sex + "<br>" +
        //                 "邮箱: " + data.Email)
        //                 .css("color", "Red");
        //         },
        //         error: function () {
        //             console.log("false");
        //         }
        //     });
        // }


    </script>
</head>
<body>
<h1>test</h1>
<h2>模糊查询</h2>

<label for="search"></label>
<input type="text" id="search" placeholder="输入用户名">
<button id="getUserByUserNameBtn">查询</button>

<table id="results">
    <tr>
        <th>ID</th>
        <th>手机号</th>
        <th>用户名</th>
        <th>性别</th>
        <th>邮箱</th>
        <th>密码</th>
        <th>创建时间</th>
        <th>注册类型</th>
        <th>操作</th>
    </tr>
</table>

<h2>注册</h2>
<form id="registerForm">
    <label for="phoneNum">手机号:</label>
    <input type="text" id="phoneNum"><br>
    <label for="username">用户名:</label>
    <input type="text" id="username" ><br>
    <label for="sex">性别:</label>
    <input type="text" id="sex" ><br>
    <label for="email">邮箱:</label>
    <input type="text" id="email" ><br>
    <label for="password">密码:</label>
    <input type="text" id="password" ><br>
    <label for="userType">注册类型:</label>
    <input type="text" id="userType" ><br>
    <button type="submit">注册</button>
</form>

<h3> 登陆</h3>

<form id="loginForm">
    <label for="loginUserName">用户名或手机号:</label>
    <input type="text" id="loginUserName"><br>
    <label for="loginPassWord">密码:</label>
    <input type="text" id="loginPassWord" ><br>
    <button type="submit" >提交</button>
    <div id="errorInfo"></div>
</form>



</body>
</html>
